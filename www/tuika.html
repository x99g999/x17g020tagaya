<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <link rel="stylesheet" href="components/loader.css">
    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/style.css">
    <script>
    var wordList = [];
    var storage = localStorage;
    var keyword = "word01";

    function tuika(){
        //データ登録
        var mondai = document.getElementById("mondai").value;
        var ans = document.getElementById("ans").value;
        // 連想配列の初期化
        var hash2 = {};

         //記入漏れがないかのチェック
         var flag = 0;
            // 設定開始（必須にする項目を設定してください）
            if(!mondai){ //「問題」の入力をチェック
                flag = 1;
            }else if(!ans){ // 「回答」の入力をチェック}
                flag = 1;
            }
            // 設定終了
            if(flag == 1){
                window.alert('必須項目に未入力がありました'); // 入力漏れがあれば警告ダイアログを表示
                return false; // 送信を中止
            }
            else if(flag == 0){
                window.alert(mondai+"/"+ans+"を登録します"); 

            //ローカルストレージからデータを取得する
            var strData = storage.getItem(keyword);
            wordList = JSON.parse(strData);
           
            //データ登録// 配列のkeyに対し値を設定する
            hash2.mondai = mondai;
            hash2.ans = ans;
                        
            //配列にデータを追加する
            wordList.push(hash2);
                        
            //ローカルストレージに保存する
            storage.setItem(keyword, JSON.stringify(wordList));         
            return true; // 送信を実行
        }
    }
    </script>
</head>
<body>
    <h1 id="title">問題追加</h1>
    <div id ="追加メニュー">
        問題<input type="text" id="mondai" placeholder="問題を入力"><br>
        正答<input type="text" id="ans" placeholder="正答入力（正＝１,不＝２）"><br>
        <button onclick="tuika()" class="button">追加する</button>
        <br>
        <button class="menu2" onclick="location.href='index.html'">メニューに戻る</button>
    </div>
    <p id="resultMessage1"></p>
    <p id="resultMessage2"></p>
</body>
</html>

